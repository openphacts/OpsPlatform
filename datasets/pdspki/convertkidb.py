import csv

#converted from http://pdsp.med.unc.edu/downloadKi.html

if __name__ == '__main__':
    #print "Starting up"

    
    RDF_NS = 'http://www.w3.org/1999/02/22-rdf-syntax-ns#'
    SCV_NS = 'http://purl.org/NET/scovo#'
    LOCAL_NS = 'http://wiki.openphacts.org/index.php/PDSP_DB#'
    MYONT_NS = 'http://wiki.openphacts.org/index.php/PDSP_DB#'
    
    DC_NS = 'http://purl.org/dc/elements/1.1/'
    
    DATASET_URL = '<http://wiki.openphacts.org/pdsp_db/receptor_binding>'
    
    filename = "./kidb110121.txt"
    text = csv.reader(open(filename, "rU"), delimiter="\t")
    
    
    for line in text:
    
    
    #print DATASET_URL + ' <' + RDF_NS + 'type> <' +  SCV_NS + 'Dataset> .'
    #print '<' + DC_NS + 'title>  "PDSP Ki Database" .' 
  
    
		#record number
		recNum = line[0]
		receptor = '<' + LOCAL_NS + recNum + '>'
	   
		print receptor + ' <' + RDF_NS + 'type> <' + MYONT_NS + 'ReceptorBinding>.'
		
		#receptor name
		print receptor + ' <' + MYONT_NS + 'has_receptor_name> "' + line[1] + '".'
		
		#unigene code
		if not line[2] == '\N':
			print receptor + ' <' + MYONT_NS + 'has_unigene_id> "' + line[2] + '".'
		
		# test ligand ID and name   The test ligand ID is present only in the zip file
		
		print receptor + ' <' + MYONT_NS + 'has_test_ligand_id> "' + line[3] + '".'
	
	    #test ligand name
		if line[4] != "\N":
			print receptor + ' <' + MYONT_NS + 'has_test_ligand_name> "' + line[4] + '".'
	
	
		# SMILES    canonical SMILES code
		if line[5] != "\N":
		    print receptor + ' <' + MYONT_NS + 'has_smiles_code> "' + line[5] + '".'
		
		# CAS number    You may use this identifier to search NCBI- PubChem Compound
		if line[6] != "\N":
			print receptor + ' <' + MYONT_NS + 'has_cas_num> "' + line[6] + '".'
	
	   
	
		# hot Ligand    you may find "undefined" for some records
		if line[7] != "\N":
			print receptor + ' <' + MYONT_NS + 'has_nsc_number> "' + line[7] + '".'
	
		if line[8] != "\N":
		    print receptor + ' <' + MYONT_NS + 'ligand_displaced> "' + line[8] + '".'
		
		# species    you may find "undefined" for some records
		if line[9] != "\N":
		    print receptor + ' <' + MYONT_NS + 'species> "' + line[9] + '".'
		
		# source / tissue   you may find "undefined" for some records
		if line[10] != "\N":
		    print receptor + ' <' + MYONT_NS + 'source> "' + line[10] + '".'
		
		kibnode = '_:ki' + recNum
		
		print receptor + ' <' + MYONT_NS + 'has_ki_value>  ' + kibnode + '.' 
		
		# Ki note   this field has a greater than symbol ">". You may find a null value
		if line[11] == '>':
			print  kibnode + ' <' + MYONT_NS + 'has_note> "' + line[11] + '".'
		
		# Ki value  this value is expressed in nM, for some values you will see more than   2 decimals, this is the result of the conversion from pKi to Ki
		print  kibnode + ' <' + RDF_NS + 'value> "' + line[12] + '"^^<http://www.w3.org/2001/XMLSchema#double>.'
		
		print  kibnode + ' <' + MYONT_NS + 'unit> <http://purl.org/obo/owl/UO#UO_0000065>.'    
		
		if line[14].isdigit():
		     print receptor + '  <' + MYONT_NS + 'pubmed_id> "' + line[14] + '".'
		
		
		
	# reference some data were internally generated by PDSP
	# link to PubMed / PMID